#
# Test of the inhibit block
#
DIAGRAM="app75/family75/inhibitor"
INHIBITOR="INHIBITOR-650"
script: sendSignal interfaces.sendLocalSignal(diagid,command.message,arg)
tag: InhibitorOutput MemoryTags/InhibitorOutput
tagset: InhibitInput MemoryTags/InhibitorFeed MemoryTags/InhibitorFinalDiagnosis

Tagset: InhibitInput
Show: browser $DIAGRAM
resetDiagram ($DIAGRAM)

Test: Inhibit Block with FinalDiagnosis
Step: Passthrough
10:00 12. false
10:00:30 13.
10:00:40 Assert: InhibitorOutput = 13 "Passthrough is 13"
10:00:45 Assert: getState($DIAGRAM,$INHIBITOR) = UNSET  "Inhibitor state is UNSET"
10:00:50 Assert: getInternalAttribute($DIAGRAM,$INHIBITOR,"Inhibiting") = false  "Inhibitor is not inhibiting"

10:01 14.
10:01:30 Assert: InhibitorOutput = 14 "Passthrough is 14"

Step: Diagnosis True - Does not change Inhibit
10:02 15. true
10:02:30 16. 
10:03 17.
10:03:30 Assert: InhibitorOutput = 17 "Output not automatically inhibited by final diagnosis"

Step: Inhibit via Script Interface
10:03:10 sendLocalSignal($DIAGRAM,"inhibit","","")
10:03:30 Assert: getInternalAttribute($DIAGRAM,$INHIBITOR,"Inhibiting") = true  "Inhibitor is now inhibiting"
10:03:30 21. false
10:04 Assert: InhibitorOutput = 17 "Output is inhibited"
10:04:30 Assert: getState($DIAGRAM,$INHIBITOR) = UNSET "Inhibitor state is UNSET"

Step: Inhibit Interval Expires
10:10 14.
10:10:30 Assert: InhibitorOutput = 14 "Passthrough is 14"
10:00:50 Assert: getInternalAttribute($DIAGRAM,$INHIBITOR,"Inhibiting") = false  "Inhibitor is not inhibiting"
